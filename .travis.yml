language: php

php:
    - 7.1.26    # UCRM: 2.14.8
    - 7.2.14    # UCRM: 2.15.0-beta6

branches:
    only:
        - master

jobs:
    include:
        - stage: tests
          if: env(TRAVIS_PHP_VERSION) = 7.1.26
          name: Stable
          install: composer install --no-dev
          script: "Unit Tests"

        - stage: tests
          if: env(TRAVIS_PHP_VERSION) = 7.2.14
          name: Beta
          install: composer install
          script: "Unit Tests"

        - stage: release
          script: skip
          deploy:
              provider: releases
              #user: $GITHUB_USERNAME
              #password: $GITHUB_PASSWORD
              api_key: $GITHUB_TOKEN
              #file: "README.md"
              skip_cleanup: true
              draft: true


#install:
#    - if [[ "$TRAVIS_PHP_VERSION" == "7.1.26" ]];   then composer install --no-dev;     fi
#    - if [[ "$TRAVIS_PHP_VERSION" == "7.2.14" ]];   then composer install;              fi

#deploy:
#    provider: releases
#    #user: $GITHUB_USERNAME
#    #password: $GITHUB_PASSWORD
#    api_key: $GITHUB_TOKEN
#    #file: "README.md"
#    skip_cleanup: true
#    draft: true